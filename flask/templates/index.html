<!DOCTYPE HTML>
<html>
<head>
    <title>Bowman</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='foundation.min.css') }}">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
            namespace = ''; // change to an empty string to use the global namespace

            // the socket.io documentation recommends sending an explicit package upon connection
            // this is specially important when using the global namespace
            var socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
            socket.on('connect', function() {
                socket.emit('client_connected');
            });

            // event handler for server sent data
            // the data is displayed in the "Received" section of the page
            socket.on('data_update', function(msg) {
                $('#log').append('<br>Received ' + msg.data);
                if (msg.data != 0){
                    $('#value_switch').html('<i class="fa fa-times"></i>');
                    $('#value_switch').attr('class', 'round alert');
                }
                else {
                    $('#value_switch').html('<i class="fa fa-check"></i>');
                    $('#value_switch').attr('class', 'round success');
                }
                $('#value').text(msg.data)
            });

            // handlers for the different forms in the page
            // these send data to the server in a variety of ways
            $('#update').click(function(event) {
                socket.emit('ask_update', {});
                return false;
            });
            $('#value_switch').click(function(event) {
                if ($('#value').text() != "0"){
                    socket.emit('value_switch_off', {});
                }
                else {
                    socket.emit('value_switch_on', {});
                }
                return false;
            });
        });
    </script>
</head>
<body>
    <h1>Hello, I am Mr. Bowman.</h1>
	<button id="update">Update</button>
    <p id="value">...</p>
    <button id="value_switch" class="round">...</button>
    <div id="log"></div>
</body>
</html>